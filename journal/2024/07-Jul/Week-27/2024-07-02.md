# 星期二, 七月 02, 2024

## Done List

## 学习笔记

### 问题点

- 偏函数
  
### 数据去重

1. 爬取数据
2. 生成字典
3. 字典转成 md5
4. 保存md5到redis
   1. 以 sadd方式保存，失败的话返回0
5. 保存成功的话，将字典保存到mongo数据库

### asyncio 结合 requests 完成爬虫

> requests 不支持协程, 不建议使用

### aiohttp 完成爬虫

> "Asyncio Event Loop is Closed" When getting loop
> Reason: python 更新后替换了默认的的`EventLoopPolicy`

```python {.line-numbers}
asyncio.set_event_loop_policy(asyncio.WindowsSelectorEventLoopPolicy())
asyncio.run(main()) # main() 是一个异步方法
```

### 协程中的回调函数

1. 创建异步任务
2. 调用异步任务的 add_done_callback 进行绑定回调函数
