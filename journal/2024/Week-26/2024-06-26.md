# Wednesday, June 26, 2024

## Done List

- [ ] SurfaceBook2 安装 Miniconda3
- [ ] SurfaceBook2 安装 MySQL
- [ ] SurfaceBook2 Chrome 安装爬虫插件
- [ ] vscode python 文件的文件头

## Learn Note

### Python 爬虫 - 08 数据存储

#### JSON 文件存储

- URL: [4399游戏]([https://](https://www.4399.com/flash/))

#### MySQL 数据库存储

- URL: [腾讯招聘](https://careers.tencent.com/search.html?keyword=python&query=at_1)

> 问题点：
> yield 的原理，生成器

1. 类里面创建属性`游标对象`之后，在创建表之后的finally 不要把游标对象close，因为后面的操作还要进行数据插入
2. 如果插入的数据是全部的话，可以只写values， 不用写字段名
3. pymysql 默认开启事务；增删改操作之后要执行 `db.commit()` 提交事务；如果失败的话，要进行回滚 `db.rollback()`
4. 主键设置成 自增的话，插入数据的id不用自增后再插入

#### MySQL 数据库连接池

pymysql 在多线程下存在问题。
使用数据库连接池可以保证每个线程的使用不同的游标对象

```python {.line-numbers}
# 必须确保pymysql 已经安装成功
pip install DBUtils
```
