# 0006-scrapy-代理设置

## 标签

## 内容

> 允许存在多个中间件

1. 定义一个 ProxyDownloadMiddlewares
2. request.meta 包含了元数据，可以通过meta进行设置
   1. 代理数据
   2. cookie
3. 下载中间件处理访问失败
   1. process_response 中判断 status 是否等于200
      1. 会将request.dont_filter=True 这个设置之后请求在引擎不会被过滤掉，可以重新发起请求
      2. return request
      3. return response 返回给 引擎，最后给到spider进行数据解析
      4. 不能return None

> settings 中的权重设置，权重值越小优先级越高

## 参考
